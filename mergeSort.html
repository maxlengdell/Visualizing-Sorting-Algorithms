<html>

<head>
    <title>Merge Sort</title>

</head>

<body>
    <canvas id="Canvas" width="700" height="700"></canvas>
    <script>
        var Canvas = document.getElementById("Canvas");
        var ctx = Canvas.getContext("2d");
        ctx.fillStyle = 'white';
        ctx.strokestyle = 'black';
        ctx.fillRect(0, 0, Canvas.width, Canvas.height);
        //ctx.strokeRect(0, 0, Canvas.width, Canvas.height);


        x = 100,y = 100;
        
        function mergeSort (arr) {
            if (arr.length <= 1){
                return arr;
            }
            const middle = Math.floor(arr.length/2);
            const left = arr.slice(0, middle);
            const right = arr.slice(middle);
            //Visualize {
            //Split array into two
                        
            return merge( mergeSort(left), mergeSort(right));
        }
        function merge(left, right) {
            let resArr = [], leftIndex = 0, rightIndex = 0;

            while(leftIndex < left.length && rightIndex < right.length) {
                arr_clr[leftIndex] = 'red';
                arr_clr[rightIndex] = 'red';
                update();
                arr_clr[leftIndex] = 'blue';
                arr_clr[rightIndex] = 'blue';

                if(left[leftIndex] < right[rightIndex]){
                    resArr.push(left[leftIndex]);
                    leftIndex++;
                }else {
                    resArr.push(right[rightIndex]);
                    rightIndex++;
                }
                update();
            }
            console.log("resArr: " + resArr);
            returnArray = resArr.concat(left.slice(leftIndex)).concat(right.slice(rightIndex));
            
            drawArray(returnArray);
            return returnArray;

        }

        function delay(delay) {
            const date = Date.now();
            let currentDate = null;
            do {
                currentDate = Date.now();
            } while (currentDate - date < delay);
            
        }
        function drawBox(num,x,y,clr) {
            ctx.fillStyle = clr;
            //ctx.strokestyle = 'lightblue';
            ctx.fillRect(x,y+10,10,num*10);
            //ctx.strokeRect(x,y+10,num*10,*10);
            ctx.fillText(num,x,y);
        }
        function drawArray(){
            
            for(i = 0; i < arr.length; i ++){
                drawBox(arr[i],x,y,arr_clr[i]);
                x += 20;
            }
            x = 100;
        }

        function update()Â {
            clearCanvas();
            drawArray();

            
        }
        arr = [3,4,2,1,6,2];
        arr_clr = [];
        function setClr(){
            arr_clr.length = arr.length;
            for(i = 0; i < arr.length; i++){
                arr_clr[i] = 'blue';
            }
        }
        function main() {
            //drawBox(10,150,150,'red');
            clearCanvas();
            setClr();
            update();
            mergeSort(arr);
        }

        function clearCanvas() {
            const context = Canvas.getContext('2d');
            context.clearRect(0, 0, Canvas.width, Canvas.height);
        }
        main();
    </script>
</body>

</html>